doctype html
html
  head
    title #{title}
    meta(name='author', content='#{author}')
    meta(name='viewport', id='viewport', content='width=device-width, user-scalable=no, initial-scale=1, minimum-scale=1, maximum-scale=1')
    meta(http-equiv='X-UA-Compatible', content='IE=Edge')
    meta(charset='utf-8')
    style.
      html,body,.react-root{height:100%;width:100%;padding:0;margin:0;}
    style
      include css/base.css
    script.
      var base = location.pathname.replace(/\/[^/]+$/, '');
      var dojoConfig = {
        parseOnLoad: false,
        async: true,
        cacheBust: '#{appVersion}',
        packages: [
          { name: 'js', location: base + 'js' },
          { name: 'vendor', location: base + 'vendor' }
        ],
        aliases: [
          ['react', 'vendor/react/react.min'],
          ['babel-polyfill', 'vendor/babel-polyfill/browser-polyfill']
        ],
        deps: ['dojo/domReady!'],
        callback: function () {require(['js/main']);}
      };
    script(src='http://js.arcgis.com/#{esriVersion}/init.js', async)
  body
    != markup
